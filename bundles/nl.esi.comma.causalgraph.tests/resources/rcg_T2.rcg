/**
 * Copyright (c) 2024, 2025 TNO-ESI
 *
 * See the NOTICE file(s) distributed with this work for additional
 * information regarding copyright ownership.
 *
 * This program and the accompanying materials are made available
 * under the terms of the MIT License which is available at
 * https://opensource.org/licenses/MIT
 *
 * SPDX-License-Identifier: MIT
 */
requirement R1
requirement R2

scenario T2:
    requirements: R1 R2

graph TestGraphT2:
    language: "C++"

    types:
        alias hType "test-interface::HRecord"

    variables:
    int x
    hType h

    node n0:
        step-name: function "test-interface::f1(z, y)"
        step-type: When
        scenario T2 step 1:
            step-variables:
                write h
            step-body: «
                bool y = true;
                float z = 0.5;
                y = function1(z);
                if(y) {
                    z = function2(6);
                }
                h = test-interface::f1(z, y);
            »

    node n1:
        step-name: function "ASSERT_XY(h.a, x)"
        step-type: Then
        scenario T2 step 2:
            step-variables:
                read-write h
                read x
            step-body: «
                h.a = ceil(h.a) * 4.0;
                ASSERT_XY(h.a, x);
            »

    edges:
        n0 -> n1
        n1 -{T2:[x, h]}-> n0
